# Measures deployment and transaction gas usage in unit tests
{{> job-header.yml}}
steps:
  - checkout
  - attach_workspace:
      at: /tmp/gas-reports
  - run:
      name: Upload gas reports
      command: |
        ls -la /tmp/gas-reports
        cp -R /tmp/gas-reports/gasReporterOutput-*.json .
        npx hardhat test:merge-gas-reports gasReporterOutput-*.json
        npx codechecks codechecks.unit.yml
        cat test-gas-used.log
  - store_artifacts:
      path: test-gas-used.log
